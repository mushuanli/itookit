/* ==========================================================================
   VFS-UI Kit - Unified Stylesheet v1.0.0
   - This file imports all necessary modules.
   - For customization, override the CSS variables defined in base/_variables.css.
   ========================================================================== */

/* --- Base: Variables --- */
:root {
  --color-white: #ffffff;
  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-700: #374151;
  --color-gray-900: #111827;
  --color-primary-default: #3b82f6;
  --color-primary-hover: #2563eb;
  --color-primary-bg-light: #dbeafe;
  --color-accent-default: #4f46e5;
  --color-accent-bg-light: #eef2ff;
  --font-family-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 13px;
  --spacing-1: 4px;
  --spacing-1-5: 6px;
  --spacing-2: 8px;
  --spacing-2-5: 10px;
  --spacing-3: 12px;
  --spacing-4: 16px;
  --spacing-5: 20px;
  --border-radius-sm: 4px;
  --border-radius-md: 6px;
  --border-radius-lg: 8px;
  --border-radius-pill: 10px;
  --border-radius-full: 9999px;
  --box-shadow-default: 0 4px 12px rgba(0,0,0,0.1);
  --z-index-popover: 1000;
  --transition-fast: 0.2s ease;
  --transition-medium: 0.3s ease-in-out;
}

/* --- Base: Reset --- */
*, *::before, *::after { box-sizing: border-box; }
body { font-family: var(--font-family-sans); color: var(--color-gray-700); margin: 0; }
ul, ol { list-style: none; margin: 0; padding: 0; }
button { background: none; border: none; padding: 0; margin: 0; cursor: pointer; font-family: inherit; font-size: inherit; color: inherit; }
a { color: inherit; text-decoration: none; }

/* --- Component: Node List --- */
.vfs-node-list { display: flex; flex-direction: column; height: 100%; background-color: var(--color-gray-50); border-right: 1px solid var(--color-gray-200); font-family: var(--font-family-sans); color: var(--color-gray-700); overflow: hidden; user-select: none; position: relative; }
.vfs-node-list__title-bar { padding: var(--spacing-3) var(--spacing-4); border-bottom: 1px solid var(--color-gray-200); flex-shrink: 0; }
.vfs-node-list__title { margin: 0; font-size: 16px; font-weight: 600; color: var(--color-gray-900); }
.vfs-node-list__header { padding: var(--spacing-2); border-bottom: 1px solid var(--color-gray-200); flex-shrink: 0; }
.vfs-node-list__search { width: 100%; padding: var(--spacing-2) var(--spacing-3); border: 1px solid var(--color-gray-300); border-radius: var(--border-radius-md); font-size: var(--font-size-base); }
.vfs-node-list__new-controls { display: grid; grid-template-columns: 1fr auto auto; gap: var(--spacing-2); margin-top: var(--spacing-2); }
.vfs-node-list__new-btn { flex-grow: 1; padding: var(--spacing-2) var(--spacing-3); border: 1px solid var(--color-primary-default); background-color: var(--color-primary-default); color: var(--color-white); border-radius: var(--border-radius-md); font-weight: 500; display: flex; align-items: center; justify-content: center; gap: var(--spacing-1-5); transition: background-color var(--transition-fast); }
.vfs-node-list__new-btn:hover { background-color: var(--color-primary-hover); }
.vfs-node-list__new-btn--icon, .vfs-node-list__new-btn--folder { flex-grow: 0; padding: var(--spacing-2) var(--spacing-2-5); background-color: var(--color-gray-100); color: var(--color-gray-700); border-color: var(--color-gray-300); }
.vfs-node-list__new-btn--icon:hover, .vfs-node-list__new-btn--folder:hover { background-color: var(--color-gray-200); }
.vfs-node-list__body { flex-grow: 1; overflow-y: auto; padding: 0; }
.vfs-node-list__item-creator { display: flex; align-items: center; gap: var(--spacing-2); padding: var(--spacing-2-5) var(--spacing-3); margin: 0 var(--spacing-2) var(--spacing-2); border: 1px solid var(--color-primary-default); border-radius: var(--border-radius-md); background-color: var(--color-white); }
.vfs-node-list__item-creator-input { flex-grow: 1; border: none; outline: none; padding: 0; font-size: var(--font-size-base); font-weight: 500; background: transparent; }
.vfs-node-item { position: relative; padding: var(--spacing-0-5) 0; }
.vfs-node-item__main-row:hover > .vfs-node-item__content, .vfs-node-item__main-row:hover > .vfs-directory-item__header { background-color: var(--color-gray-100); }
.vfs-node-item__content.is-active, .vfs-directory-item.is-active > .vfs-directory-item__header { background-color: var(--color-accent-bg-light); border-left-color: var(--color-accent-default); }
.vfs-node-item__content { position: relative; display: flex; align-items: flex-start; padding: var(--spacing-2-5) 0; cursor: pointer; border-left: 3px solid transparent; gap: var(--spacing-2); transition: background-color var(--transition-fast), border-color var(--transition-fast); }
.vfs-node-item__icon { flex-shrink: 0; margin-top: 2px; }
.vfs-node-item__main { flex-grow: 1; display: flex; flex-direction: column; gap: var(--spacing-1); min-width: 0; }
.vfs-node-item__meta { flex-shrink: 0; display: flex; flex-direction: column; align-items: flex-end; gap: var(--spacing-1); margin-left: auto; padding-left: var(--spacing-3); text-align: right; font-size: var(--font-size-md); color: var(--color-gray-500); }
.vfs-node-item__title-wrapper { display: flex; align-items: center; }
.vfs-node-item__title { font-weight: 500; color: var(--color-gray-900); word-break: break-word; transition: color var(--transition-fast); }
.vfs-node-item__indicator { width: 8px; height: 8px; background-color: var(--color-primary-default); border-radius: var(--border-radius-full); margin-left: var(--spacing-1-5); flex-shrink: 0; }
.vfs-node-item__summary { font-size: var(--font-size-md); color: var(--color-gray-500); line-height: 1.4; }
.vfs-node-item__timestamp { font-size: var(--font-size-sm); color: var(--color-gray-400); }
.vfs-node-item__tags { display: flex; flex-wrap: wrap; gap: var(--spacing-1); margin-top: var(--spacing-1); }
.vfs-node-item__badges { display: flex; gap: var(--spacing-1-5); }
.vfs-badge { font-size: var(--font-size-xs); background-color: var(--color-gray-100); padding: 2px 6px; border-radius: var(--border-radius-sm); }
.vfs-directory-item { position: relative; }
.vfs-directory-item__header { display: flex; align-items: center; padding: var(--spacing-2) 0; cursor: pointer; border-left: 3px solid transparent; transition: background-color var(--transition-fast), border-color var(--transition-fast); }
.vfs-directory-item__toggle { width: 16px; height: 16px; flex-shrink: 0; position: relative; margin-right: var(--spacing-1); }
.vfs-directory-item__toggle::before { content: '▶'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 10px; color: var(--color-gray-500); transition: transform var(--transition-fast); }
.vfs-directory-item__toggle.is-expanded::before { transform: translate(-50%, -50%) rotate(90deg); }
.vfs-directory-item__icon { margin-right: var(--spacing-2); }
.vfs-directory-item__title { font-weight: 500; transition: color var(--transition-fast); }
.vfs-directory-item__children { padding-left: var(--spacing-5); }
.vfs-node-item__outline { max-height: 0; overflow: hidden; transition: max-height var(--transition-medium), padding var(--transition-medium), border-top var(--transition-medium); background-color: var(--color-gray-50); padding: 0 var(--spacing-3) 0 45px; font-size: var(--font-size-md); border-left: 3px solid transparent; border-top: 1px solid transparent; }
.vfs-node-item__outline.is-expanded { max-height: 400px; padding-top: var(--spacing-1-5); padding-bottom: var(--spacing-2-5); border-top-color: var(--color-gray-100); overflow-y: auto; }
.vfs-node-item:hover .vfs-node-item__outline-toggle { opacity: 1; }
.vfs-node-item__outline-toggle { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: var(--color-accent-bg-light); border: 1px solid var(--color-gray-300); border-radius: var(--border-radius-full); width: 22px; height: 22px; cursor: pointer; display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity var(--transition-fast); }
.vfs-node-item__outline-toggle-icon { width: 0; height: 0; border-left: 4px solid transparent; border-right: 4px solid transparent; border-top: 5px solid var(--color-accent-default); transition: transform var(--transition-fast); }
.vfs-node-item__outline-toggle-icon.is-expanded { transform: rotate(180deg); }
.vfs-node-list--density-compact .vfs-node-item__content { padding-top: var(--spacing-1-5); padding-bottom: var(--spacing-1-5); }
.vfs-node-list--density-compact .vfs-node-item__summary, .vfs-node-list--density-compact .vfs-node-item__tags, .vfs-node-list--density-compact .vfs-node-item__badges { display: none; }
.vfs-node-item .vfs-node-item__content.is-selected, .vfs-directory-item.is-selected > .vfs-directory-item__header { background-color: var(--color-primary-bg-light); border-left-color: var(--color-primary-default); }
.is-dragging { opacity: 0.5; }
.drop-target-above > .vfs-node-item__content, .drop-target-above > .vfs-directory-item__header { border-top: 2px solid var(--color-primary-default); }
.drop-target-below > .vfs-node-item__content, .drop-target-below > .vfs-directory-item__header { border-bottom: 2px solid var(--color-primary-default); }
.drop-target-folder > .vfs-directory-item__header { background-color: var(--color-primary-bg-light); outline: 1px solid var(--color-primary-default); }
.vfs-node-item__main-row { display: flex; align-items: center; padding: 0 var(--spacing-3); transition: padding-left var(--transition-fast); }
.vfs-node-item__content, .vfs-directory-item__header { flex-grow: 1; min-width: 0; }
.vfs-node-item__checkbox-wrapper { flex-shrink: 0; width: 0; padding-left: 0; overflow: hidden; display: flex; align-items: center; justify-content: center; margin-right: 0; transition: width var(--transition-fast), margin-right var(--transition-fast); }
.vfs-node-item.is-selection-mode .vfs-node-item__main-row { padding-left: 0; }
.vfs-node-item.is-selection-mode .vfs-node-item__checkbox-wrapper { width: calc(16px + var(--spacing-3)); margin-right: var(--spacing-2); }
.vfs-node-item__checkbox { width: 16px; height: 16px; accent-color: var(--color-primary-default); cursor: pointer; margin-left: var(--spacing-3); }
.vfs-node-list__footer { padding: var(--spacing-2) var(--spacing-3); border-top: 1px solid var(--color-gray-200); flex-shrink: 0; display: grid; align-items: center; overflow: hidden; }
.vfs-node-list__footer-content, .vfs-node-list__bulk-bar { grid-row: 1; grid-column: 1; transition: opacity 0.15s ease-in-out, visibility 0.15s ease-in-out; }
.vfs-node-list__footer-content { display: flex; justify-content: space-between; align-items: center; width: 100%; }
.vfs-node-list__footer button { color: var(--color-gray-500); font-size: var(--font-size-base); display: flex; align-items: center; gap: var(--spacing-1-5); padding: var(--spacing-1) var(--spacing-2); border-radius: var(--border-radius-sm); }
.vfs-node-list__footer button:hover { background-color: var(--color-gray-100); }
.vfs-node-list__bulk-bar { display: flex; align-items: center; justify-content: space-between; background-color: var(--color-gray-900); color: var(--color-white); margin: calc(-1 * var(--spacing-2)) calc(-1 * var(--spacing-3)); padding: var(--spacing-2) var(--spacing-3); opacity: 0; visibility: hidden; }
.vfs-node-list--bulk-mode .vfs-node-list__footer-content { opacity: 0; visibility: hidden; }
.vfs-node-list--bulk-mode .vfs-node-list__bulk-bar { opacity: 1; visibility: visible; }
.vfs-node-list__bulk-bar-info { display: flex; align-items: center; gap: var(--spacing-3); font-size: var(--font-size-md); font-weight: 500; }
.vfs-node-list__bulk-bar-actions { display: flex; gap: var(--spacing-2); }
.vfs-node-list__bulk-bar-btn { background-color: var(--color-gray-700); color: var(--color-white); border: none; border-radius: var(--border-radius-md); width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; font-size: 14px; }
.vfs-node-list__bulk-bar-btn:hover { background-color: var(--color-gray-600); }
.vfs-node-list__bulk-bar-btn--danger { background-color: #ef4444; }
.vfs-node-list__bulk-bar-btn--danger:hover { background-color: #dc2626; }
.vfs-node-list__bulk-bar-btn--text { width: auto; height: auto; background: none; color: var(--color-gray-400); font-size: var(--font-size-sm); text-decoration: underline; padding: 0; }
.vfs-node-list__bulk-bar-btn--text:hover { color: var(--color-white); }

/* --- Component: File Outline --- */
.vfs-file-outline { background-color: var(--color-white); border-top: 1px solid var(--color-gray-200); padding: var(--spacing-3) var(--spacing-4); font-size: var(--font-size-base); min-height: 60px; overflow-y: auto; user-select: none; resize: vertical; flex-shrink: 0; }
.vfs-file-outline__title { font-weight: 600; margin-bottom: var(--spacing-2); color: var(--color-gray-900); }
.vfs-file-outline__placeholder { color: var(--color-gray-400); font-size: var(--font-size-md); }
.vfs-file-outline__item { padding: var(--spacing-1) 0; line-height: 1.4; }
.vfs-file-outline__link { color: var(--color-gray-700); transition: color var(--transition-fast); cursor: pointer; display: flex; align-items: flex-start; min-width: 0; width: 100%; padding: 2px 0; }
.vfs-file-outline__link:hover { color: var(--color-accent-default); }
.vfs-file-outline__text { flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: normal; word-break: break-word; line-height: 1.4; }
.vfs-file-outline__text[title] { cursor: help; }
.vfs-file-outline__toggle { display: inline-block; flex-shrink: 0; width: 16px; height: 16px; margin-right: var(--spacing-1); position: relative; }
.vfs-file-outline__toggle::before { content: '▶'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 10px; color: var(--color-gray-500); transition: transform var(--transition-fast); }
.vfs-file-outline__toggle.is-expanded::before { transform: translate(-50%, -50%) rotate(90deg); }
.vfs-file-outline__toggle.is-placeholder { opacity: 0; cursor: default; }
.vfs-file-outline__item--level-1 > .vfs-file-outline__link > .vfs-file-outline__text { font-weight: 600; }
.vfs-file-outline__item--level-2 { padding-left: var(--spacing-5); }

/* --- Component: Popovers & Menus --- */
.vfs-settings-popover { position: absolute; bottom: 45px; left: var(--spacing-2); background-color: var(--color-white); border: 1px solid var(--color-gray-200); border-radius: var(--border-radius-lg); box-shadow: var(--box-shadow-default); z-index: var(--z-index-popover); width: 220px; padding: var(--spacing-3); }
.vfs-settings-popover__title { margin: 0 0 var(--spacing-2) 0; font-size: var(--font-size-sm); font-weight: 600; color: var(--color-gray-500); text-transform: uppercase; }
.vfs-settings-popover__group { display: flex; gap: var(--spacing-1); margin-bottom: var(--spacing-3); }
.vfs-settings-popover__option-btn { flex-grow: 1; font-size: var(--font-size-md); padding: var(--spacing-1) var(--spacing-2); border: 1px solid var(--color-gray-300); background-color: var(--color-gray-50); border-radius: 5px; }
.vfs-settings-popover__option-btn:hover { background-color: var(--color-gray-100); }
.vfs-settings-popover__option-btn.is-active { background-color: var(--color-accent-bg-light); border-color: var(--color-accent-default); color: var(--color-accent-default); font-weight: 500; }
.vfs-settings-popover__checkbox-group { display: flex; flex-direction: column; gap: var(--spacing-1-5); }
.vfs-settings-popover__checkbox-label { display: flex; align-items: center; gap: var(--spacing-2); font-size: var(--font-size-base); cursor: pointer; }
.vfs-context-menu { position: fixed; background-color: var(--color-white); border: 1px solid var(--color-gray-200); border-radius: var(--border-radius-md); box-shadow: var(--box-shadow-default); padding: var(--spacing-1-5) 0; z-index: var(--z-index-popover); min-width: 150px; }
.vfs-context-menu button { display: flex; align-items: center; gap: var(--spacing-2); width: 100%; text-align: left; padding: var(--spacing-2) var(--spacing-3); font-size: var(--font-size-base); }
.vfs-context-menu button:hover { background-color: var(--color-gray-100); }
.vfs-context-menu__separator { border: none; border-top: 1px solid var(--color-gray-100); margin: var(--spacing-1-5) 0; }

/* --- Component: MoveTo Modal --- */
.vfs-move-modal-overlay { display: none; position: fixed; inset: 0; background-color: rgba(0,0,0,0.5); z-index: calc(var(--z-index-popover) + 10); align-items: center; justify-content: center; }
.vfs-move-modal { background-color: var(--color-white); border-radius: var(--border-radius-lg); width: 400px; max-width: 90vw; box-shadow: var(--box-shadow-default); display: flex; flex-direction: column; }
.vfs-move-modal__header { padding: var(--spacing-4); border-bottom: 1px solid var(--color-gray-200); font-weight: 600; color: var(--color-gray-900); }
.vfs-move-modal__body { padding: var(--spacing-2) var(--spacing-4); max-height: 40vh; overflow-y: auto; }
.vfs-move-modal__footer { padding: var(--spacing-3) var(--spacing-4); border-top: 1px solid var(--color-gray-200); display: flex; justify-content: flex-end; gap: var(--spacing-2); }
.vfs-move-modal__btn { padding: var(--spacing-2) var(--spacing-4); border-radius: var(--border-radius-md); border: 1px solid var(--color-gray-300); background-color: var(--color-gray-50); transition: background-color var(--transition-fast); }
.vfs-move-modal__btn:hover:not(:disabled) { background-color: var(--color-gray-100); }
.vfs-move-modal__btn--primary { background-color: var(--color-primary-default); color: var(--color-white); border-color: var(--color-primary-default); }
.vfs-move-modal__btn--primary:hover:not(:disabled) { background-color: var(--color-primary-hover); }
.vfs-move-modal__btn:disabled { opacity: 0.5; cursor: not-allowed; }
.vfs-move-modal__folder { display: flex; align-items: center; padding: var(--spacing-1-5); margin-left: calc(var(--level, 0) * 20px); cursor: pointer; border-radius: var(--border-radius-sm); transition: background-color var(--transition-fast); }
.vfs-move-modal__folder:hover { background-color: var(--color-gray-100); }
.vfs-move-modal__folder-title.is-selected { font-weight: 600; color: var(--color-primary-default); }

/* --- Component: Tag Editor (Common) --- */
.vfs-tag-editor { display: flex; flex-direction: column; background-color: var(--color-white); border-radius: var(--border-radius-lg); padding: var(--spacing-3); width: 320px; font-family: var(--font-family-sans); font-size: var(--font-size-base); }
.vfs-tag-editor--popover { position: fixed; z-index: calc(var(--z-index-popover) + 5); border: 1px solid var(--color-gray-200); box-shadow: var(--box-shadow-default); }
.vfs-tag-editor__pills { display: flex; flex-wrap: wrap; gap: var(--spacing-1-5); padding: var(--spacing-2); border: 1px solid var(--color-gray-300); border-radius: var(--border-radius-md); background-color: var(--color-white); max-height: 150px; overflow-y: auto; transition: border-color var(--transition-fast); }
.vfs-tag-editor__pills:focus-within { border-color: var(--color-primary-default); box-shadow: 0 0 0 1px var(--color-primary-default); }
.vfs-tag-editor__pill { display: inline-flex; align-items: center; gap: var(--spacing-1-5); background-color: var(--color-gray-100); color: var(--color-gray-700); border-radius: var(--border-radius-pill); padding: var(--spacing-1) var(--spacing-2-5); font-size: var(--font-size-sm); font-weight: 500; }
.vfs-tag-editor__remove-btn { display: flex; align-items: center; justify-content: center; width: 16px; height: 16px; border-radius: 50%; background-color: var(--color-gray-400); color: var(--color-white); font-size: 12px; line-height: 1; font-weight: bold; transition: background-color var(--transition-fast); }
.vfs-tag-editor__remove-btn:hover { background-color: var(--color-gray-500); }
.vfs-tag-editor__input-wrapper { flex-grow: 1; display: flex; min-width: 120px; }
.vfs-tag-editor__input { width: 100%; border: none; outline: none; padding: 0; background-color: transparent; font-size: inherit; font-family: inherit; color: var(--color-gray-900); }
.vfs-tag-editor__suggestions { position: relative; margin-top: var(--spacing-1); background-color: var(--color-white); border: 1px solid var(--color-gray-200); border-radius: var(--border-radius-md); box-shadow: var(--box-shadow-default); max-height: 180px; overflow-y: auto; z-index: 1; display: none; }
.vfs-tag-editor__suggestion { padding: var(--spacing-2) var(--spacing-3); cursor: pointer; font-size: var(--font-size-md); transition: background-color var(--transition-fast); }
.vfs-tag-editor__suggestion:hover { background-color: var(--color-gray-100); }
.vfs-tag-editor__suggestion.is-active { background-color: var(--color-primary-default); color: var(--color-white); }
.vfs-tag-editor__footer { display: flex; justify-content: flex-end; gap: var(--spacing-2); padding-top: var(--spacing-3); margin-top: var(--spacing-2); border-top: 1px solid var(--color-gray-200); flex-shrink: 0; }
.vfs-tag-editor__btn { padding: var(--spacing-1-5) var(--spacing-3); border-radius: var(--border-radius-md); border: 1px solid var(--color-gray-300); background-color: var(--color-white); font-size: var(--font-size-sm); font-weight: 500; transition: background-color var(--transition-fast), border-color var(--transition-fast); }
.vfs-tag-editor__btn:hover { background-color: var(--color-gray-50); }
.vfs-tag-editor__btn--primary { background-color: var(--color-primary-default); color: var(--color-white); border-color: var(--color-primary-default); }
.vfs-tag-editor__btn--primary:hover { background-color: var(--color-primary-hover); }